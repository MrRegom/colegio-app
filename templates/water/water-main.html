{% extends 'partials/base.html' %}
{% load static %}
{% block title %} Water | Página Principal {% endblock title %} 

{% block extra_css %}
<!-- Sweet Alert css-->
<link href="{% static 'libs/sweetalert2/sweetalert2.min.css' %}" rel="stylesheet" type="text/css" />
{% endblock extra_css %}

{% block main_title %} 

<div class="page-title-box">
    <div class="row align-items-center">
        <div class="col-md-5">
            {% block pagetitle %}
                {% include "partials/page-title.html" with pagetitle="Water" title="Monitoreo de Agua" %}
            {% endblock pagetitle %}
        </div><!--end col-->
    </div><!--end row-->
</div>
{% endblock main_title %}

{% block content %}

<!-- Banner para el título del formulario -->
<div class="row mb-4">
    <div class="col-lg-12">
        <div class="card bg-primary">
            <div class="card-body text-center text-white py-4">
                <h2 class="mb-2">Sistema de Monitoreo de Agua</h2>
                <p class="mb-0">Información y estadísticas sobre el consumo y calidad del agua</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xl-3 col-md-6">
        <div class="card card-animate">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <p class="fw-medium text-muted mb-0">Consumo Total</p>
                        <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="2500">0</span> m³</h2>
                        <p class="mb-0 text-muted"><span class="badge bg-light text-success mb-0">
                                <i class="ri-arrow-up-line align-middle"></i> 8.42 %
                            </span> vs. mes anterior</p>
                    </div>
                    <div>
                        <div class="avatar-sm flex-shrink-0">
                            <span class="avatar-title bg-success-subtle rounded-circle fs-2">
                                <i class="ri-water-flash-line text-success"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-animate">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <p class="fw-medium text-muted mb-0">Calidad Promedio</p>
                        <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="95">0</span> %</h2>
                        <p class="mb-0 text-muted"><span class="badge bg-light text-success mb-0">
                                <i class="ri-arrow-up-line align-middle"></i> 2.1 %
                            </span> vs. mes anterior</p>
                    </div>
                    <div>
                        <div class="avatar-sm flex-shrink-0">
                            <span class="avatar-title bg-info-subtle rounded-circle fs-2">
                                <i class="ri-test-tube-line text-info"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-animate">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <p class="fw-medium text-muted mb-0">Puntos de Muestreo</p>
                        <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="12">0</span></h2>
                        <p class="mb-0 text-muted"><span class="badge bg-light text-success mb-0">
                                <i class="ri-arrow-up-line align-middle"></i> 3 nuevos
                            </span> este mes</p>
                    </div>
                    <div>
                        <div class="avatar-sm flex-shrink-0">
                            <span class="avatar-title bg-warning-subtle rounded-circle fs-2">
                                <i class="ri-map-pin-line text-warning"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-animate">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <p class="fw-medium text-muted mb-0">Alertas Activas</p>
                        <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="2">0</span></h2>
                        <p class="mb-0 text-muted"><span class="badge bg-light text-danger mb-0">
                                <i class="ri-arrow-down-line align-middle"></i> 3 menos
                            </span> que el mes anterior</p>
                    </div>
                    <div>
                        <div class="avatar-sm flex-shrink-0">
                            <span class="avatar-title bg-danger-subtle rounded-circle fs-2">
                                <i class="ri-error-warning-line text-danger"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Historial de Consumo Mensual</h4>
            </div>
            <div class="card-body">
                <div id="area_chart_basic" data-colors='["--tb-primary"]' class="apex-charts" dir="ltr"></div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block extra_js %}
<!-- apexcharts -->
<script src="{% static 'libs/apexcharts/apexcharts.min.js' %}"></script>

<!-- Dashboard init -->
<script>
    // Basic area chart
    var linechartBasicColors = getChartColorsArray("area_chart_basic");
    if (linechartBasicColors) {
        var options = {
            series: [{
                name: 'Consumo de Agua (m³)',
                data: [1800, 2200, 1900, 2100, 2300, 2400, 2200, 2300, 2100, 2000, 2200, 2500]
            }],
            chart: {
                height: 350,
                type: 'area',
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2,
            },
            xaxis: {
                categories: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
            },
            colors: linechartBasicColors,
            fill: {
                opacity: 0.06,
                type: 'solid'
            }
        };

        var chart = new ApexCharts(document.querySelector("#area_chart_basic"), options);
        chart.render();
    }
</script>

<!-- Sweet Alerts js -->
<script src="{% static 'libs/sweetalert2/sweetalert2.min.js' %}"></script>
{% endblock extra_js %} 