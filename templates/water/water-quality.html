{% extends 'partials/base.html' %}
{% load static %}
{% block title %} Water | Calidad del Agua {% endblock title %} 

{% block extra_css %}
<!-- Sweet Alert css-->
<link href="{% static 'libs/sweetalert2/sweetalert2.min.css' %}" rel="stylesheet" type="text/css" />
{% endblock extra_css %}

{% block main_title %} 

<div class="page-title-box">
    <div class="row align-items-center">
        <div class="col-md-5">
            {% block pagetitle %}
                {% include "partials/page-title.html" with pagetitle="Water" title="Calidad del Agua" %}
            {% endblock pagetitle %}
        </div><!--end col-->
    </div><!--end row-->
</div>
{% endblock main_title %}

{% block content %}

<!-- Banner para el título -->
<div class="row mb-4">
    <div class="col-lg-12">
        <div class="card bg-info">
            <div class="card-body text-center text-white py-4">
                <h2 class="mb-2">Monitoreo de Calidad del Agua</h2>
                <p class="mb-0">Métricas e indicadores de calidad por punto de muestreo</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Índice de Calidad por Zona</h4>
            </div>
            <div class="card-body">
                <div id="radialchart_quality" data-colors='["--tb-success", "--tb-info", "--tb-primary", "--tb-warning"]' class="apex-charts" dir="ltr"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Parámetros Promedio</h4>
            </div>
            <div class="card-body">
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Parámetro</th>
                            <th>Valor</th>
                            <th>Unidad</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>pH</td>
                            <td>7.2</td>
                            <td>-</td>
                            <td><span class="badge bg-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>Turbidez</td>
                            <td>0.8</td>
                            <td>NTU</td>
                            <td><span class="badge bg-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>Cloro residual</td>
                            <td>0.65</td>
                            <td>mg/L</td>
                            <td><span class="badge bg-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>Coliformes totales</td>
                            <td>0</td>
                            <td>UFC/100mL</td>
                            <td><span class="badge bg-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>Dureza</td>
                            <td>180</td>
                            <td>mg/L</td>
                            <td><span class="badge bg-info">Aceptable</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Histórico de Calidad del Agua</h4>
            </div>
            <div class="card-body">
                <div id="line_chart_quality" data-colors='["--tb-primary", "--tb-success", "--tb-warning"]' class="apex-charts" dir="ltr"></div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block extra_js %}
<!-- apexcharts -->
<script src="{% static 'libs/apexcharts/apexcharts.min.js' %}"></script>

<!-- Dashboard init -->
<script>
    // Radial chart
    var radialchartQualityColors = getChartColorsArray("radialchart_quality");
    if (radialchartQualityColors) {
        var options = {
            series: [95, 92, 89, 97],
            chart: {
                height: 350,
                type: 'radialBar',
            },
            plotOptions: {
                radialBar: {
                    dataLabels: {
                        name: {
                            fontSize: '22px',
                        },
                        value: {
                            fontSize: '16px',
                        },
                        total: {
                            show: true,
                            label: 'Promedio',
                            formatter: function (w) {
                                return '93%'
                            }
                        }
                    }
                }
            },
            labels: ['Zona Norte', 'Zona Sur', 'Zona Este', 'Zona Oeste'],
            colors: radialchartQualityColors
        };

        var chart = new ApexCharts(document.querySelector("#radialchart_quality"), options);
        chart.render();
    }
    
    // Line chart
    var lineChartQualityColors = getChartColorsArray("line_chart_quality");
    if (lineChartQualityColors) {
        var options = {
            series: [{
                name: 'pH',
                data: [7.1, 7.2, 7.3, 7.2, 7.1, 7.2, 7.3, 7.1, 7.2, 7.1, 7.2, 7.2]
            }, {
                name: 'Cloro residual',
                data: [0.60, 0.62, 0.65, 0.68, 0.65, 0.62, 0.64, 0.65, 0.63, 0.64, 0.65, 0.66]
            }, {
                name: 'Turbidez',
                data: [0.9, 0.8, 0.7, 0.8, 0.9, 0.8, 0.7, 0.8, 0.7, 0.8, 0.9, 0.8]
            }],
            chart: {
                height: 350,
                type: 'line',
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2,
            },
            xaxis: {
                categories: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
            },
            colors: lineChartQualityColors
        };

        var chart = new ApexCharts(document.querySelector("#line_chart_quality"), options);
        chart.render();
    }
</script>

<!-- Sweet Alerts js -->
<script src="{% static 'libs/sweetalert2/sweetalert2.min.js' %}"></script>
{% endblock extra_js %} 